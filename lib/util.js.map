{"version":3,"sources":["../src/util.js"],"names":[],"mappings":";;;;;;;AAAA;;;;;;AAEA;AACO,IAAI,wCAAgB,UAAS,KAAT,EAAgB;AACzC;AACA,MAAI,OAAO,IAAX;;AAEA;AACA,MAAI,SAAS,SAAb,EAAwB;AACtB;AACD;;AAED,MAAI,YAAY,MAAM,eAAtB;AACA,MAAI,cAAc,MAAM,iBAAxB;AACA,QAAM,eAAN,GAAwB,KAAxB;;AAEA,MAAI,IAAJ;AACA,QAAM,iBAAN,GAA0B,UAAS,IAAT,EAAe,KAAf,EAAsB;AAC9C,QAAI,SAAS,MAAM,QAAQ,CAAd,CAAb;AACA,QAAI,iBAAE,WAAF,CAAc,MAAd,CAAJ,EAA2B;AACzB;AACD;;AAED,WAAO;AACL,YAAM,OAAO,WAAP,EADD;AAEL,YAAM,OAAO,aAAP,EAFD;AAGL,gBAAU,OAAO,eAAP;AAHL,KAAP;AAKD,GAXD;AAYA;AACA,UAAQ,KAAR;;AAEA,QAAM,eAAN,GAAwB,SAAxB;AACA,QAAM,iBAAN,GAA0B,WAA1B;AACA,SAAO,IAAP;AACD,CAhCM;;kBAkCQ,O","file":"util.js","sourcesContent":["import _ from 'lodash';\n\n// See http://code.google.com/p/v8/wiki/JavaScriptStackTraceApi\nexport let getCallerInfo = function(level) {\n  // eslint-disable-next-line no-invalid-this, consistent-this\n  let self = this;\n\n  // 'strict' mode has no caller info\n  if (self === undefined) {\n    return;\n  }\n\n  let origLimit = Error.stackTraceLimit;\n  let origPrepare = Error.prepareStackTrace;\n  Error.stackTraceLimit = level;\n\n  let info;\n  Error.prepareStackTrace = function(_err, stack) {\n    let caller = stack[level - 1];\n    if (_.isUndefined(caller)) {\n      return;\n    }\n\n    info = {\n      file: caller.getFileName(),\n      line: caller.getLineNumber(),\n      function: caller.getFunctionName()\n    };\n  };\n  // eslint-disable-next-line no-unused-expressions\n  Error().stack;\n\n  Error.stackTraceLimit = origLimit;\n  Error.prepareStackTrace = origPrepare;\n  return info;\n};\n\nexport default exports;\n"]}