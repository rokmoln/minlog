{"version":3,"sources":["../../src/serializers/time.js"],"names":[],"mappings":"4HAAA;AACA;AACA,yE;;AAEO,IAAI,aAAa,GAAG,gBAAe,EAAC,KAAD,EAAf,EAAwB;AACjD,MAAI;AACF,IAAA,KADE;AAEF,IAAA,UAFE;AAGF,IAAA,QAHE;AAIA,EAAA,KAJJ;;AAMA,MAAI,CAAC,yBAAE,MAAF,CAAS,KAAT,CAAL,EAAsB;AACpB,WAAO,KAAP;AACD;;AAED,EAAA,KAAK,CAAC,KAAN,GAAc;AACZ,IAAA,KAAK,EAAE,qBAAO,KAAP,EAAc,WAAd,EADK;AAEZ,IAAA,IAAI,EAAE,wBAAS,EAAT,CAAY,KAAZ,EAFM;AAGZ,IAAA,UAAU,EAAE,qBAAO,KAAP,EAAc,SAAd,EAHA,EAAd;;;AAMA,MAAI,CAAC,yBAAE,MAAF,CAAS,UAAT,CAAL,EAA2B;AACzB,WAAO,KAAP;AACD;;AAED,EAAA,KAAK,CAAC,UAAN,GAAmB;AACjB,IAAA,KAAK,EAAE,qBAAO,UAAP,EAAmB,WAAnB,EADU;AAEjB,IAAA,IAAI,EAAE,wBAAS,EAAT,CAAY,KAAZ,EAFW;AAGjB,IAAA,UAAU,EAAE,qBAAO,UAAP,EAAmB,SAAnB,EAHK,EAAnB;;;AAMA,MAAI,CAAC,yBAAE,MAAF,CAAS,QAAT,CAAL,EAAyB;AACvB,WAAO,KAAP;AACD;;AAED,EAAA,KAAK,CAAC,QAAN,GAAiB;AACf,IAAA,KAAK,EAAE,qBAAO,QAAP,EAAiB,WAAjB,EADQ;AAEf,IAAA,IAAI,EAAE,wBAAS,EAAT,CAAY,KAAZ,EAFS;AAGf,IAAA,UAAU,EAAE,qBAAO,QAAP,EAAiB,SAAjB,EAHG,EAAjB;;;AAMA,MAAI,QAAQ,GAAG,gBAAO,QAAP,CAAgB,QAAQ,GAAG,UAA3B,CAAf;AACA,EAAA,KAAK,CAAC,SAAN,GAAkB;AAChB,IAAA,KAAK,EAAE,QAAQ,CAAC,WAAT,EADS;AAEhB,IAAA,KAAK,EAAE,QAAQ,CAAC,QAAT,EAFS;AAGhB,IAAA,EAAE,EAAE,QAAQ,CAAC,YAAT,EAHY,EAAlB;;;AAMA,SAAO,KAAP;AACD,CA7CM,C","file":"time.js","sourcesContent":["import _ from 'lodash-firecloud';\nimport moment from 'moment';\nimport momentTz from 'moment-timezone';\n\nexport let serializeTime = async function({entry}) {\n  let {\n    _time,\n    _timeStart,\n    _timeEnd\n  } = entry;\n\n  if (!_.isDate(_time)) {\n    return entry;\n  }\n\n  entry._time = {\n    stamp: moment(_time).toISOString(),\n    zone: momentTz.tz.guess(),\n    utc_offset: moment(_time).utcOffset()\n  };\n\n  if (!_.isDate(_timeStart)) {\n    return entry;\n  }\n\n  entry._timeStart = {\n    stamp: moment(_timeStart).toISOString(),\n    zone: momentTz.tz.guess(),\n    utc_offset: moment(_timeStart).utcOffset()\n  };\n\n  if (!_.isDate(_timeEnd)) {\n    return entry;\n  }\n\n  entry._timeEnd = {\n    stamp: moment(_timeEnd).toISOString(),\n    zone: momentTz.tz.guess(),\n    utc_offset: moment(_timeEnd).utcOffset()\n  };\n\n  let duration = moment.duration(_timeEnd - _timeStart);\n  entry._duration = {\n    stamp: duration.toISOString(),\n    human: duration.humanize(),\n    ms: duration.milliseconds()\n  };\n\n  return entry;\n};\n\nexport default serializeTime;\n"]}